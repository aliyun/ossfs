set(PRE_BUILT_DIR ${CMAKE_CURRENT_SOURCE_DIR}/pre-built)

# process PhotonLibOS
if (${ARCH} STREQUAL x86_64)
  set(PHOTONLIBOS_URL file://${PRE_BUILT_DIR}/PhotonLibOS/PhotonLibOS-0.8.4-linux-x86_64.tar.gz)
  set(PHOTONLIBOS_HASH MD5=90d327465bfa13578f59ba4b90d7ad85)
elseif (${ARCH} STREQUAL aarch64)
  set(PHOTONLIBOS_URL file://${PRE_BUILT_DIR}/PhotonLibOS/PhotonLibOS-0.8.4-linux-aarch64.tar.gz)
  set(PHOTONLIBOS_HASH MD5=3284d76873c1275a3e68dbce534c6e18)
endif ()

ExternalProject_Add(PhotonLibOS
  SOURCE_DIR ${CMAKE_BINARY_DIR}/PhotonLibOS-0.8.4
  URL ${PHOTONLIBOS_URL}
  URL_HASH ${PHOTONLIBOS_HASH}
  CONFIGURE_COMMAND ""
  BUILD_COMMAND ""
  UPDATE_COMMAND ""
  INSTALL_COMMAND ""
)

set(PHOTONLIBOS_INCLUDE_DIRS ${CMAKE_BINARY_DIR}/PhotonLibOS-0.8.4/include PARENT_SCOPE)
set(PHOTONLIBOS_LIBRARIES ${CMAKE_BINARY_DIR}/PhotonLibOS-0.8.4/lib/libphoton.a PARENT_SCOPE)

# process libfuse
if (${ARCH} STREQUAL x86_64)
  set(LIBFUSE_URL file://${PRE_BUILT_DIR}/libfuse/libfuse-3.16.2-linux-x86_64.tar.gz)
  set(LIBFUSE_HASH MD5=d84e371e77c82a2a18bec1b353633554)
elseif (${ARCH} STREQUAL aarch64)
  set(LIBFUSE_URL file://${PRE_BUILT_DIR}/libfuse/libfuse-3.16.2-linux-aarch64.tar.gz)
  set(LIBFUSE_HASH MD5=e3cf7d710562cb82c0e88fbd49cb4711)
endif ()

ExternalProject_Add(libfuse
  SOURCE_DIR ${CMAKE_BINARY_DIR}/libfuse-3.16.2
  URL ${LIBFUSE_URL}
  URL_HASH ${LIBFUSE_HASH}
  CONFIGURE_COMMAND ""
  BUILD_COMMAND ""
  UPDATE_COMMAND ""
  INSTALL_COMMAND ""
)

set(LIBFUSE_INCLUDE_DIRS ${CMAKE_BINARY_DIR}/libfuse-3.16.2/include PARENT_SCOPE)
set(LIBFUSE_LIBRARIES ${CMAKE_BINARY_DIR}/libfuse-3.16.2/lib/libfuse3.so.3.16.2 PARENT_SCOPE)

# process CLI11
set(CLI11_URL file://${PRE_BUILT_DIR}/CLI11/CLI11-2.4.1.tar.gz)
set(CLI11_HASH MD5=a3918e887e2d2ccf5f05d4c3471b2518)

ExternalProject_Add(CLI11
  SOURCE_DIR ${CMAKE_BINARY_DIR}/CLI11-2.4.1
  URL ${CLI11_URL}
  URL_HASH ${CLI11_HASH}
  CONFIGURE_COMMAND ""
  BUILD_COMMAND ""
  UPDATE_COMMAND ""
  INSTALL_COMMAND ""
)

set(CLI11_INCLUDE_DIRS ${CMAKE_BINARY_DIR}/CLI11-2.4.1/include PARENT_SCOPE)
